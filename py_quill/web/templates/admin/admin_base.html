{% extends "root.html" %}
{% from "partials/site_header.html" import site_header %}

{% block title %}{% block admin_title %}Admin Â· {{ site_name }}{% endblock %}{% endblock %}

{% block body %}
{% set current_path = request.path %}
{% set dashboard_url = url_for('web.admin_dashboard') %}
{% set joke_categories_url = url_for('web.admin_joke_categories') %}
{% set joke_books_url = url_for('web.admin_joke_books') %}
{% set joke_books_prefix = joke_books_url.rstrip('/') %}
{% set stats_url = url_for('web.admin_stats') %}
{% set redirect_tester_url = url_for('web.admin_redirect_tester') %}
{% set printable_notes_url = url_for('web.admin_printable_notes') %}
{% set jokes_url = url_for('web.admin_jokes') %}
<div class="site-shell admin-site-shell">
  {% call site_header(dashboard_url, site_name + " Admin", site_name, True) %}
        <a class="nav-link text-button{% if current_path == dashboard_url %} nav-link--active{% endif %}"
          href="{{ dashboard_url }}">
          Dashboard
        </a>
        <a class="nav-link text-button{% if current_path == jokes_url %} nav-link--active{% endif %}"
          href="{{ jokes_url }}">
          Jokes
        </a>
        <a class="nav-link text-button{% if current_path == joke_categories_url %} nav-link--active{% endif %}"
          href="{{ joke_categories_url }}">
          Categories
        </a>
        <a class="nav-link text-button{% if current_path == printable_notes_url %} nav-link--active{% endif %}"
          href="{{ printable_notes_url }}">
          Printable Notes
        </a>
        <a class="nav-link text-button{% if current_path.startswith(joke_books_prefix) %} nav-link--active{% endif %}"
          href="{{ joke_books_url }}">
          Joke Books
        </a>
        <a class="nav-link text-button{% if current_path == redirect_tester_url %} nav-link--active{% endif %}"
          href="{{ redirect_tester_url }}">
          Redirect Tester
        </a>
        <a class="nav-link text-button{% if current_path == stats_url %} nav-link--active{% endif %}"
          href="{{ stats_url }}">
          Stats
        </a>
        {% include "partials/user_nav_menu.html" %}
  {% endcall %}
  <main class="site-main">
    <div class="main-container">
      {% block content %}{% endblock %}
    </div>
  </main>
  <footer class="site-footer">
    <div class="site-footer__inner text-footer">
      <small>&copy; {{ site_name }} {{ now_year|default(2025) }}</small>
      <a class="site-footer__link"
        href="/privacy.html"
        target="_blank"
        rel="noopener noreferrer"
        data-analytics-event="web_footer_privacy_click"
        data-analytics-label="privacy_policy">
        Privacy Policy
      </a>
    </div>
  </footer>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
{% endblock %}
