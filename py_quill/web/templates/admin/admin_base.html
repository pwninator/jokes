{% extends "root.html" %}

{% block title %}{% block admin_title %}Admin Â· {{ site_name }}{% endblock %}{% endblock %}

{% block body %}
{% set current_path = request.path %}
{% set dashboard_url = url_for('web.admin_dashboard') %}
{% set joke_categories_url = url_for('web.admin_joke_categories') %}
{% set joke_books_url = url_for('web.admin_joke_books') %}
{% set joke_books_prefix = joke_books_url.rstrip('/') %}
<div class="site-shell admin-site-shell">
  <header class="site-header">
    <div class="header-inner">
      <a class="brand" href="{{ dashboard_url }}" aria-label="{{ site_name }} admin home">
        <img class="brand-logo" alt="{{ site_name }} logo"
          src="https://images.quillsstorybook.com/cdn-cgi/image/width=128,format=auto,quality=60/_joke_assets/icon_cookie_01_transparent_light_128.png" />
        <span class="brand-text text-brand">{{ site_name }} Admin</span>
      </a>
      <nav class="primary-nav" aria-label="Admin navigation">
        <a class="nav-link text-button{% if current_path == dashboard_url %} nav-link--active{% endif %}"
          href="{{ dashboard_url }}">
          Dashboard
        </a>
        <a class="nav-link text-button{% if current_path == joke_categories_url %} nav-link--active{% endif %}"
          href="{{ joke_categories_url }}">
          Categories
        </a>
        <a class="nav-link text-button{% if current_path.startswith(joke_books_prefix) %} nav-link--active{% endif %}"
          href="{{ joke_books_url }}">
          Joke Books
        </a>
        {% include "partials/user_nav_menu.html" %}
      </nav>
    </div>
  </header>
  <main class="site-main">
    <div class="main-container">
      {% block content %}{% endblock %}
    </div>
  </main>
  <footer class="site-footer">
    <div class="site-footer__inner text-footer">
      <small>&copy; {{ site_name }} {{ now_year|default(2025) }}</small>
      <a class="site-footer__link"
        href="/privacy.html"
        target="_blank"
        rel="noopener noreferrer"
        data-analytics-event="web_footer_privacy_click"
        data-analytics-label="privacy_policy">
        Privacy Policy
      </a>
    </div>
  </footer>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
{% endblock %}
