<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Admin Â· {{ site_name }}{% endblock %}</title>
  <meta name="twitter:description"
    content="{% block twitter_description %}Discover funny, family-friendly jokes with images. Reveal the punchline when you're ready.{% endblock %}">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>{{ admin_css|safe }}</style>>
  {% block head_extra %}{% endblock %}
</head>

<body>
  <header class="admin-header">
    <h1>{% block header_title %}{{ site_name }} Admin{% endblock %}</h1>
    <nav class="admin-nav">
      <a href="{{ url_for('web.admin_dashboard') }}">Dashboard</a>
      <a href="{{ url_for('web.admin_joke_books') }}">Joke Books</a>
      <button id="logout-btn" class="logout-btn" type="button">Sign out</button>
    </nav>
  </header>
  <main class="admin-main">
    {% block content %}{% endblock %}
  </main>
  <script>
    (function () {
      const logoutBtn = document.getElementById('logout-btn');
      if (!logoutBtn) return;
      logoutBtn.addEventListener('click', async () => {
        try {
          await fetch('/admin/logout', {
            method: 'POST',
            headers: { 'Accept': 'application/json' },
            credentials: 'same-origin',
          });
        } catch (err) {
          console.warn('Failed to logout:', err); // eslint-disable-line no-console
        } finally {
          window.location.href = '{{ url_for("web.admin_login") }}';
        }
      });
    })();
  </script>
  {% block body_extra %}{% endblock %}
</body>

</html>

