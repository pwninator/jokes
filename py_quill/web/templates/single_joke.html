{% extends "base.html" %}
{% from "components/joke_card.html" import joke_card %}

{% block title %}{{ joke.setup_text | truncate(60) }} | {{ site_name }}{% endblock %}
{% block meta_description %}{{ joke.setup_text | truncate(155) }}{% endblock %}

{% block head_extra %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": {{ joke.setup_text | tojson }},
      "acceptedAnswer": {
        "@type": "Answer",
        "text": {{ joke.punchline_text | tojson }}
      }
    }
  ]
}
</script>
<style>
  /* Single joke page: single column, centered, square images up to 600px */
  .single-joke-page .grid { grid-template-columns: 1fr; max-width: 640px; margin: 0 auto; }
  .single-joke-page .card { width: min(100%, 600px); margin: 0 auto; }
  .single-joke-page .media { aspect-ratio: 1 / 1; }
  .single-joke-page .media img { width: 100%; height: 100%; object-fit: cover; }
</style>
{% endblock %}

{% block content %}
  <div class="single-joke-page">
  <section class="grid" aria-label="Joke">
    {{ joke_card(joke, reveal_label='Reveal punchline', image_size=600) }}
  </section>
  </div>
{% endblock %}
